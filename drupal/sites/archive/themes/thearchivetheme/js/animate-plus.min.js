(function(e){function t(t){this.htmlElement=t;this.animations=e(this.htmlElement).attr("data-animations").split(",");this.animationIndex=0;this.lastAnimation="";if(e(this.htmlElement).attr("data-animation-duration")!==undefined){this.animationDuration=e(this.htmlElement).attr("data-animation-duration").split(",")}if(e(this.htmlElement).attr("data-animation-delay")!==undefined){this.animationDelay=e(this.htmlElement).attr("data-animation-delay").split(",")}}function n(){this.elements=[];this.animateWhenVisible=false;this.isPerformingAnimation=false;this.resetWhenOffscreen=false;this.repeat=false;this.isReset=true}function r(){this.onVisbileGroups=[];this.map=[];e(".animate-plus").addClass("animated");e.each(e(".animate-plus"),function(r,i){var s=new t(i);var o=e(i).attr("data-animation-group");if(o===undefined){o="_"+r;e(i).attr("data-animation-group",o)}if(this.map[o]===undefined){this.map[o]=new n}var u=e(i).attr("data-animation-when-visible");if(u!==undefined){this.map[o].animateWhenVisible=true}var a=e(i).attr("data-animation-reset-offscreen");if(a!==undefined){this.map[o].resetWhenOffscreen=true}var f=e(i).attr("data-animation-repeat");if(f!==undefined){this.map[o].repeat=true}var l=this.map[o].elements;var c=e(i).attr("data-animation-order");var h=c!==undefined;if(h){var p=c.split(",")}var d=e(i).attr("data-animations").split(",");for(var v=0;v<d.length;v++){var m=v+1;if(h){m=p[v]}if(l[m]===undefined){l[m]=[]}l[m].push(s)}}.bind(this));e(window).on("scroll",function(){this.checkOnVisibleGroups()}.bind(this));e(window).on("resize",function(){this.checkOnVisibleGroups()}.bind(this));e(document).ready(function(){this.checkOnVisibleGroups()}.bind(this));this.isElementVisible=function(t){var n=e(window).scrollTop();var r=e(window).height()+n;var i=e(t).offset().top;var s=e(t).height()+i;return r>=i&&n<=s};this.checkOnVisibleGroups=function(){for(var e=0;e<this.onVisbileGroups.length;e++){var t=this.map[this.onVisbileGroups[e]];for(var n=1;n<t.elements.length;n++){var r=t.elements[n];for(var i=0;i<r.length;i++){var s=r[i].htmlElement;if(this.isElementVisible(s)&&!t.isPerformingAnimation){t.animate(1)}if(!this.isElementVisible(s)&&!t.isPerformingAnimation&&t.resetWhenOffscreen){t.reset()}}}}}}jQuery.fn.redraw=function(){return this.hide(0,function(){e(this).show()})};jQuery.fn.restartAnimation=function(){var t=e(this).attr("data-animation-group");var n=r.getInstance().getMap()[t];n.restart()};t.prototype.doNextAnimation=function(t){if(this.animationIndex>=this.animations.length){t();return}var n;var r;e(this.htmlElement).removeClass(this.lastAnimation);this.lastAnimation=this.animations[this.animationIndex];e(this.htmlElement).css("animation-duration","").css("-webkit-animation-duration","").css("-moz-animation-duration","").css("-ms-animation-duration","").css("-o-animation-duration","");if(this.animationDuration!==undefined&&this.animationDuration[this.animationIndex]!==undefined){n=this.animationDuration[this.animationIndex];e(this.htmlElement).css("animation-duration",n).css("-webkit-animation-duration",n).css("-moz-animation-duration",n).css("-ms-animation-duration",n).css("-o-animation-duration",n)}e(this.htmlElement).css("animation-delay","").css("-webkit-animation-delay","").css("-moz-animation-delay","").css("-ms-animation-delay","").css("-o-animation-delay","");if(this.animationDelay!==undefined&&this.animationDelay[this.animationIndex]!==undefined){r=this.animationDelay[this.animationIndex];e(this.htmlElement).css("animation-delay",r).css("-webkit-animation-delay",r).css("-moz-animation-delay",r).css("-ms-animation-delay",r).css("-o-animation-delay",r)}this.animationIndex++;e(this.htmlElement).redraw();e(this.htmlElement).addClass(this.lastAnimation).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",t)};n.prototype.reset=function(){if(!this.isReset){for(var t=1;t<this.elements.length;t++){for(var n=0;n<this.elements[t].length;n++){this.elements[t][n].animationIndex=0;e(this.elements[t][n].htmlElement).removeClass(this.elements[t][n].lastAnimation)}}this.isReset=true}};n.prototype.animate=function(e){var t=0;var n=this.elements[e];if(n===undefined){if(this.repeat){this.reset();this.animate(1)}else{this.isPerformingAnimation=false}return}this.isPerformingAnimation=true;this.isReset=false;for(var r=0;r<n.length;r++){n[r].doNextAnimation(function(){t++;if(t==n.length){this.animate(++e)}}.bind(this))}};n.prototype.restart=function(){if(!this.isPerformingAnimation){this.reset();this.animate(1)}};r.prototype.start=function(){for(var e in this.map){if(this.map[e].animateWhenVisible){this.registerOnVisbileMap(e)}else{this.map[e].animate(1)}}};r.prototype.registerOnVisbileMap=function(e){this.onVisbileGroups.push(e)};r.prototype.getMap=function(){return this.map};r.instance=null;r.getInstance=function(){if(r.instance===null){r.instance=new r}return r.instance};e(document).ready(function(){r.getInstance().start()})})(jQuery)